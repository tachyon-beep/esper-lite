# Esper-Lite environment defaults

# --- Security ---
# Shared secret used to sign Leyline/Oona payloads (TKT-501).
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
ESPER_LEYLINE_SECRET=

# --- Oona (Redis Streams) ---
OONA_NORMAL_STREAM=oona.normal
OONA_EMERGENCY_STREAM=oona.emergency
OONA_TELEMETRY_STREAM=oona.telemetry
OONA_POLICY_STREAM=oona.policy

# Optional tuning (Weatherlight/Oona)
# TTL for trimming streams (ms); default 900000 (15 minutes)
OONA_MESSAGE_TTL_MS=900000
# Drop stale kernel requests older than this window (ms); default 60000
KERNEL_FRESHNESS_WINDOW_MS=60000
# Request/response replay guard cache size; default 4096
KERNEL_NONCE_CACHE_SIZE=4096
# Persistent cache directory for Tezzeret torch.compile artifacts
TEZZERET_INDUCTOR_CACHE_DIR=var/cache/tezzeret/inductor
# --- Redis ---
REDIS_URL=redis://localhost:6379/0

# --- Tezzeret (Inductor cache) ---
# Point PyTorch Inductor to a persistent cache directory to reuse
# compiled kernels across processes. Uncomment and adjust as needed.
# TORCHINDUCTOR_CACHE_DIR=/var/cache/tezzeret/inductor

# --- Urabrask (Producer & Bench) ---
# Enable Urabrask BSDS producer worker in Weatherlight (defaults off)
URABRASK_ENABLED=false
URABRASK_PRODUCER_INTERVAL_S=300
URABRASK_TOPN_PER_CYCLE=5
URABRASK_ONLY_SAFE_TIER=true
URABRASK_TIMEOUT_MS=200

# Enable publication of BSDSIssued/BSDSFailed events to Oona
URABRASK_OONA_PUBLISH_ENABLED=false

# Bench worker (optional; defaults off)
URABRASK_BENCH_ENABLED=false
URABRASK_BENCH_INTERVAL_S=1800
URABRASK_BENCH_TOPN=3
URABRASK_BENCH_TIMEOUT_MS=500
# Minimum seconds between benchmark runs per blueprint (cooldown)
URABRASK_BENCH_MIN_INTERVAL_S=3600

# Crucible artifacts and hazard probes
URABRASK_CRUCIBLE_ARTIFACTS_DIR=./var/urabrask/crucible
URABRASK_CRUCIBLE_ARTIFACTS_KEEP=5
URABRASK_CRUCIBLE_MEMORY_WATERMARK_MB=64.0
URABRASK_CRUCIBLE_ALLOW_OOM=false
URABRASK_CRUCIBLE_SIMULATE_OOM=false
# Enable CUDA event timing for crucible (default off; CPU-only timing)
URABRASK_CRUCIBLE_GPU_TIMING_ENABLED=false

# Signing + WAL for BSDS (prototype; optional)
URABRASK_SIGNING_ENABLED=false
URABRASK_WAL_PATH=./var/urza/urabrask_wal.jsonl
