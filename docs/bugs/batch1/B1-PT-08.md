# Finding Ticket: Untyped Telemetry Payload for GOVERNOR_ROLLBACK (PyTorch Perspective)

---

## Ticket Metadata

| Field | Value |
|-------|-------|
| **Ticket ID** | `B1-PT-08` |
| **Severity** | `P4` |
| **Status** | `open` |
| **Batch** | 1 |
| **Agent** | `pytorch` |
| **Domain** | `tolaria` |
| **Assignee** | |
| **Created** | 2024-12-27 |
| **Updated** | 2024-12-27 |

---

## Location

| Field | Value |
|-------|-------|
| **File(s)** | `/home/john/esper-lite/src/esper/tolaria/governor.py` |
| **Line(s)** | `251-264` |
| **Function/Class** | `TolariaGovernor.execute_rollback()` |

---

## Summary

**One-line summary:** GOVERNOR_ROLLBACK telemetry uses untyped dict with `# type: ignore[arg-type]` - needs typed payload.

**Category:**
- [ ] Correctness bug
- [ ] Race condition / concurrency
- [ ] Memory leak / resource issue
- [ ] Performance bottleneck
- [ ] Numerical stability
- [ ] torch.compile compatibility
- [ ] Dead code / unwired functionality
- [x] API design / contract violation
- [ ] Test coverage gap
- [ ] Documentation / naming
- [ ] Defensive programming violation
- [ ] Legacy code policy violation

---

## Detailed Description

### What's Wrong

The telemetry payload for `GOVERNOR_ROLLBACK` events is an untyped dictionary with `# type: ignore[arg-type]` to suppress type errors.

### Code Evidence

```python
# /home/john/esper-lite/src/esper/tolaria/governor.py:251-264

hub.emit(TelemetryEvent(
    event_type=TelemetryEventType.GOVERNOR_ROLLBACK,
    ...
    data={  # type: ignore[arg-type]
        "env_id": env_id,
        "device": str(device),
        ...
    },
))
```

### Why This Matters

- Technical debt that should be addressed as part of telemetry contract migration
- Not a correctness bug, but makes telemetry consumers less reliable

---

## Recommended Fix

See `B1-CR-01` for the full recommended fix with typed `GovernorRollbackPayload` dataclass.

---

## Related Findings

| Ticket ID | Relationship | Notes |
|-----------|--------------|-------|
| `B1-CR-01` | `duplicate` | Primary ticket with full fix details |
| `B1-DRL-06` | `duplicate` | DRL perspective on same issue |

---

## Cross-Review

| Agent | Verdict | Evaluation |
|-------|---------|------------|
| **DRL** | NEUTRAL | Telemetry payload typing is a code quality concern with no impact on RL training dynamics - rollback telemetry is observational, not part of the reward signal or gradient computation. Typed payloads aid debugging but the untyped dict does not introduce numerical instability, bias gradients, or affect policy learning in any way. |
| **PyTorch** | NEUTRAL | Untyped telemetry payloads have no impact on torch.compile, CUDA correctness, or tensor operations - this is purely a typing/API consistency concern. The type: ignore suppression is technical debt but does not affect runtime behavior or PyTorch training performance. |
| **CodeReview** | ENDORSE | Valid finding: `# type: ignore[arg-type]` on telemetry payloads is technical debt that undermines type safety and makes downstream consumers fragile. Correctly marked as duplicate of B1-CR-01; consolidating the fix into a typed dataclass aligns with project conventions for typed payload discrimination. |

---

## Appendix

### Original Report Reference

**Report file:** `docs/temp/2712reports/batch1-pytorch.md`
**Section:** "Cross-Cutting Integration Risks" - "Telemetry Payload Migration"
