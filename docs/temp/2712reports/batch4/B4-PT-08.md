# Finding Ticket: episode_boundaries Tracking Potentially Unused

---

## Ticket Metadata

| Field | Value |
|-------|-------|
| **Ticket ID** | `B4-PT-08` |
| **Severity** | `P4` |
| **Status** | `open` |
| **Batch** | 4 |
| **Agent** | `pytorch` |
| **Domain** | `simic` |
| **Assignee** | |
| **Created** | 2024-12-27 |
| **Updated** | 2024-12-27 |

---

## Location

| Field | Value |
|-------|-------|
| **File(s)** | `/home/john/esper-lite/src/esper/simic/agent/rollout_buffer.py` |
| **Line(s)** | Multiple |
| **Function/Class** | `TamiyoRolloutBuffer.start_episode()`, `end_episode()`, `episode_boundaries` |

---

## Summary

**One-line summary:** `start_episode`/`end_episode` methods populate `episode_boundaries` but no consumers of this data were found.

**Category:**
- [ ] Correctness bug
- [ ] Race condition / concurrency
- [ ] Memory leak / resource issue
- [ ] Performance bottleneck
- [ ] Numerical stability
- [ ] torch.compile compatibility
- [x] Dead code / unwired functionality
- [ ] API design / contract violation
- [ ] Test coverage gap
- [ ] Documentation / naming
- [ ] Defensive programming violation
- [ ] Legacy code policy violation

---

## Detailed Description

### What's Wrong

The buffer tracks episode boundaries:

```python
self.episode_boundaries: list[list[tuple[int, int]]] = [[] for _ in range(num_envs)]

def start_episode(self, env_idx: int) -> None:
    # Records start of episode

def end_episode(self, env_idx: int) -> None:
    # Records end of episode, stores (start, end) tuple
```

But no code appears to read from `episode_boundaries`. It's populated but never consumed.

### Possible Use Cases

1. Debugging: View episode structure in rollouts
2. Future feature: Per-episode statistics
3. Dead code from a removed feature

---

## Recommended Fix

1. Search for usages:
```bash
grep -rn "episode_boundaries" src/ tests/
```

2. If unused externally, consider removing (per No Legacy Code Policy)
3. If intended for debugging, add a TODO:
```python
# TODO: episode_boundaries is currently tracked for debugging.
# Consider removing if not needed, or add telemetry that uses it.
```

---

## Verification

### How to Verify the Fix

- [ ] Search for usages of episode_boundaries
- [ ] Remove if unused, or document intended purpose

---

## Related Findings

- B4-PT-07: TamiyoRolloutStep potentially unused (similar pattern)

---

## Appendix

### Original Report Reference

**Report file:** `docs/temp/2712reports/batch4-pytorch.md`
**Section:** "P4 (Style/Minor)" (BUF-5)

---

## Cross-Review (DRL Specialist)

| Verdict | **NEUTRAL** |
|---------|-------------|

**Evaluation:** Episode boundary tracking could enable per-episode return analysis and GAE reset verification, but currently has no consumers. Remove per No Legacy Code Policy, or wire into telemetry if per-episode diagnostics are planned.

---

## Cross-Review (Code Review Specialist)

| Verdict | **ENDORSE** |
|---------|-------------|

**Evaluation:** Valid finding - grep confirms `episode_boundaries` is only referenced in `rollout_buffer.py` with no external consumers. Per No Legacy Code Policy, dead tracking code should be removed unless documented for telemetry.

---

## Cross-Review (PyTorch Specialist)

| Verdict | **ENDORSE** |
|---------|-------------|

**Evaluation:** Confirmed unused: `episode_boundaries` is only written in `rollout_buffer.py`, never read in src/ or tests/. No torch.compile or tensor operation implications - pure dead code that should be removed per No Legacy Code Policy.
